(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{C2vp:function(t,e,s){"use strict";s.r(e),s.d(e,"translateFactory",function(){return ce}),s.d(e,"GroupsModule",function(){return ne});var c=s("ofXK"),n=s("fXoL"),i=s("I/3d"),o=s("YTKZ");let a=(()=>{class t{constructor(t,e){this.db=t,this.us=e,this.subscriptions=[],this.data=this.us.localUserData.asObservable();let s=this.data.subscribe(t=>{null!=t&&(this.firstName=t.firstName,this.lastName=t.lastName,this.avatar=t.avatar,this.jobTitle=t.jobTitle)});this.subscriptions.push(s)}getGroupsUsers(t){return this.db.collection("Groups2").doc(t).collection("Users").snapshotChanges()}getGroups(){return this.db.collection("Groups2").snapshotChanges()}getGrpById(t){return this.db.collection("Groups2").doc(t).valueChanges()}sendRequest(t,e){this.db.collection("Groups2").doc(e).collection("Users",e=>e.where("__name__","!=",t)).doc(t).set({firstName:this.firstName,lastName:this.lastName,avatar:this.avatar,jobTitle:this.jobTitle,Role:0})}updateMembers(t,e){this.db.collection("Groups2").doc(e).collection("Users").doc(t).update({Role:1}),this.addGroupToUser(t,e)}ChangeMembers(t,e){this.db.collection("Groups2").doc(e).collection("Users").doc(t).update({Role:2}),this.addGroupToUser(t,e)}updateRequests(t,e){this.db.collection("Groups2").doc(e).collection("Users").doc(t).update({Role:2}),this.addGroupToUser(t,e)}changeSub(t,e){this.db.collection("Groups2").doc(e).collection("Users").doc(t).update({Role:0}),this.deleteGroupFromUser(t,e)}MembersRole(t,e,s){if(1===s)this.updateMembers(t,e);else if(2===s)this.ChangeMembers(t,e);else if(2===s)this.updateRequests(t,e);else{if(0!==s)return;this.changeSub(t,e)}}DeleteMembers(t,e){this.db.collection("Groups2").doc(e).collection("Users",e=>e.where("__name__","==",t)).doc(t).delete(),this.deleteGroupFromUser(t,e)}addGroupToUser(t,e){let s=this.us.getUserData(t).subscribe(e=>{let c=e.payload.get("groups");s.unsubscribe(),this.db.collection("users-details").doc(t).update({groups:c})})}deleteGroupFromUser(t,e){let s=this.us.getUserData(t).subscribe(c=>{let n=c.payload.get("groups");-1!=n.indexOf(e)&&n.splice(n.indexOf(e),1),s.unsubscribe(),this.db.collection("users-details").doc(t).update({groups:n})})}}return t.\u0275fac=function(e){return new(e||t)(n.hc(i.a),n.hc(o.a))},t.\u0275prov=n.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var r=s("1kSV");let l=(()=>{class t{constructor(){this.toasts=[]}show(t,e={}){this.toasts.push(Object.assign({textOrTpl:t},e))}remove(t){this.toasts=this.toasts.filter(e=>e!==t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function d(t,e){}function u(t,e){if(1&t&&n.Ic(0,d,0,0,"ng-template",4),2&t){const t=n.mc().$implicit;n.tc("ngTemplateOutlet",t.textOrTpl)}}function b(t,e){if(1&t&&n.Kc(0),2&t){const t=n.mc().$implicit;n.Lc(t.textOrTpl)}}function p(t,e){if(1&t){const t=n.bc();n.ac(0,"ngb-toast",1),n.kc("hidden",function(){n.Dc(t);const s=e.$implicit;return n.mc().toastService.remove(s)}),n.Ic(1,u,1,1,"ng-template",2),n.Ic(2,b,1,1,"ng-template",null,3,n.Jc),n.Zb()}if(2&t){const t=e.$implicit,s=n.Cc(3),c=n.mc();n.Lb(t.classname),n.tc("autohide",!0)("delay",t.delay||5e3),n.Jb(1),n.tc("ngIf",c.isTemplate(t))("ngIfElse",s)}}let g=(()=>{class t{constructor(t){this.toastService=t}ngOnInit(){}isTemplate(t){return t.textOrTpl instanceof n.S}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-toasterMsg"]],hostVars:2,hostBindings:function(t,e){2&t&&n.Nb("ngb-toasts",!0)},decls:1,vars:1,consts:[[3,"class","autohide","delay","hidden",4,"ngFor","ngForOf"],[3,"autohide","delay","hidden"],["class","top-center",3,"ngIf","ngIfElse"],["text",""],[3,"ngTemplateOutlet"]],template:function(t,e){1&t&&n.Ic(0,p,4,6,"ngb-toast",0),2&t&&n.tc("ngForOf",e.toastService.toasts)},directives:[c.m,r.r,c.n,c.p],styles:[""]}),t})();var m=s("tyNb"),h=s("3Pt+"),f=s("sYmb"),v=s("cZdB");function C(t,e){1&t&&n.Wb(0,"img",30)}function y(t,e){if(1&t&&n.Wb(0,"img",31),2&t){const t=n.mc().$implicit;n.tc("src",t.Img,n.Ec)}}const Z=function(t){return{"text-right":t}};function I(t,e){if(1&t){const t=n.bc();n.ac(0,"ul",18),n.ac(1,"li",19),n.ac(2,"div",20),n.Ic(3,C,1,0,"img",21),n.Ic(4,y,1,1,"img",22),n.ac(5,"div",23),n.ac(6,"h6",24),n.ac(7,"a",25),n.Kc(8),n.Zb(),n.Zb(),n.ac(9,"small",26),n.ac(10,"span"),n.Kc(11),n.Zb(),n.Zb(),n.Zb(),n.ac(12,"div"),n.ac(13,"button",27),n.kc("click",function(){n.Dc(t);const s=e.$implicit,c=n.mc(2);return c.leaveGroup(c.userID,s.id)}),n.Wb(14,"i",28),n.ac(15,"span",29),n.Kc(16),n.nc(17,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=e.$implicit,s=n.mc(2);n.Jb(1),n.tc("ngClass",n.yc(9,Z,"ar"==s.Lang)),n.Jb(2),n.tc("ngIf",""==t.Img),n.Jb(1),n.tc("ngIf",""!=t.Img),n.Jb(3),n.vc("routerLink","/Group/group-profile/",t.id,""),n.Jb(1),n.Lc(t.Name),n.Jb(3),n.Lc(t.Specialty),n.Jb(5),n.Lc(n.oc(17,7,"Leave"))}}function k(t,e){if(1&t){const t=n.bc();n.ac(0,"div",12),n.ac(1,"h1",13),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"div",14),n.Wb(5,"span",15),n.ac(6,"input",16),n.kc("ngModelChange",function(e){return n.Dc(t),n.mc().keyWordsSearch=e}),n.nc(7,"translate"),n.Zb(),n.Zb(),n.Ic(8,I,18,11,"ul",17),n.nc(9,"filter"),n.Zb()}if(2&t){const t=n.mc();n.Jb(1),n.tc("ngClass",n.yc(12,Z,"ar"==t.Lang)),n.Jb(1),n.Lc(n.oc(3,5,"Your Groups")),n.Jb(4),n.uc("placeholder",n.oc(7,7,"What Do You Have Searching For ?...")),n.tc("ngModel",t.keyWordsSearch),n.Jb(2),n.tc("ngForOf",n.pc(9,9,t.GroupList,t.keyWordsSearch))}}function M(t,e){1&t&&n.Wb(0,"img",30)}function D(t,e){if(1&t&&n.Wb(0,"img",31),2&t){const t=n.mc().$implicit;n.tc("src",t.Img,n.Ec)}}function J(t,e){if(1&t){const t=n.bc();n.ac(0,"ul",18),n.ac(1,"li",19),n.ac(2,"div",20),n.Ic(3,M,1,0,"img",21),n.Ic(4,D,1,1,"img",22),n.ac(5,"div",23),n.ac(6,"h6",24),n.ac(7,"a",25),n.Kc(8),n.Zb(),n.Zb(),n.ac(9,"small",26),n.Kc(10),n.Zb(),n.Zb(),n.ac(11,"button",33),n.kc("click",function(){n.Dc(t);const s=e.$implicit,c=n.mc(2);return c.leaveGroup(c.userID,s.id)}),n.Wb(12,"i",34),n.ac(13,"span",29),n.Kc(14),n.nc(15,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=e.$implicit,s=n.mc(2);n.Jb(1),n.tc("ngClass",n.yc(9,Z,"ar"==s.Lang)),n.Jb(2),n.tc("ngIf",""==t.Img),n.Jb(1),n.tc("ngIf",""!=t.Img),n.Jb(3),n.vc("routerLink","/Group/group-profile/",t.id,""),n.Jb(1),n.Mc("",t.Name," "),n.Jb(2),n.Lc(t.Specialty),n.Jb(4),n.Lc(n.oc(15,7,"Withdraw"))}}function P(t,e){if(1&t){const t=n.bc();n.ac(0,"div",32),n.ac(1,"h1",13),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"div",14),n.Wb(5,"span",15),n.ac(6,"input",16),n.kc("ngModelChange",function(e){return n.Dc(t),n.mc().keyWordsSearch=e}),n.nc(7,"translate"),n.Zb(),n.Zb(),n.Ic(8,J,16,11,"ul",17),n.nc(9,"filter"),n.Zb()}if(2&t){const t=n.mc();n.Jb(1),n.tc("ngClass",n.yc(12,Z,"ar"==t.Lang)),n.Jb(1),n.Lc(n.oc(3,5,"Your Requests")),n.Jb(4),n.uc("placeholder",n.oc(7,7,"What Do You Have Searching For ?...")),n.tc("ngModel",t.keyWordsSearch),n.Jb(2),n.tc("ngForOf",n.pc(9,9,t.subscribers,t.keyWordsSearch))}}const O=function(t,e){return{"mr-auto":t,"ml-auto":e}},x=function(){return["/Group/discover-groups"]};let w=(()=>{class t{constructor(t,e,s,c){this.GrpServ=t,this.us=e,this.toastService=c,this.GroupList=[],this.GroupList2=[],this.subscribers=[],this.users=[],this.subscription=[],s.type="warning",s.dismissible=!1}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.data=this.us.localUserData.asObservable();let t=this.data.subscribe(t=>{null!=t&&(this.userID=t.id)});this.subscription.push(t),this.GroupList=[];let e=this.GrpServ.getGroups().subscribe(t=>{this.GroupList2=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.subscribers=[],this.GroupList=[],this.users=[];for(let e of this.GroupList2){let t=this.GrpServ.getGroupsUsers(e.id).subscribe(t=>{if(this.users=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.users=this.users.filter(t=>t.id==this.userID),this.users.length>0){let t=!1;this.users[0].id==this.userID&&this.users[0].Role>0?(this.GroupList.find(s=>{s.id==e.id&&(t=!0)}),t||this.GroupList.push(e)):this.users[0].id==this.userID&&0==this.users[0].Role?(this.subscribers.find(s=>{s.id==e.id&&(t=!0)}),t||this.subscribers.push(e)):(this.GroupList=this.GroupList.filter(t=>t.id!=e.id),this.subscribers=this.subscribers.filter(t=>t.id!=e.id))}else this.GroupList=this.GroupList.filter(t=>t.id!=e.id),this.subscribers=this.subscribers.filter(t=>t.id!=e.id)});this.subscription.push(t)}});this.subscription.push(e)}leaveGroup(t,e){this.showMsg(),this.GrpServ.DeleteMembers(t,e)}showMsg(){"en"==this.Lang?this.toastService.show("You Have Been Left The Group",{classname:"bg-danger text-light",delay:5e3}):this.toastService.show("\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0645\u063a\u0627\u062f\u0631\u0629 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629",{classname:"bg-danger text-right text-light",delay:5e3})}ngOnDestroy(){for(let t of this.subscription)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(a),n.Vb(o.a),n.Vb(r.c),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-request-group-page"]],decls:21,vars:16,consts:[[1,"groups-page"],[1,"container"],[1,"content-groups"],["aria-live","polite","aria-atomic","true"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[1,"discover-btn",3,"ngClass"],[1,"btn","btn-sm","btn-outline-primary","rounded-pill","px-3",3,"routerLink"],[1,"mt-2",3,"ngbNavOutlet"],["id","GroupsDiscover",1,"Groups-content-display1"],[1,"px-2","text-muted","custom-h1",3,"ngClass"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"ngClass"],[1,"media"],["class","mx-3","src","../../../../assets/400x400.png","alt","","width","64px",4,"ngIf"],["class","mx-3","alt","","width","64px",3,"src",4,"ngIf"],[1,"media-body"],[1,"mt-2","mb-1"],[1,"text-decoration-none","text-secondary",3,"routerLink"],[1,"text-muted"],[1,"btn","btn-outline-danger","btn-sm","rounded-pill","mt-3","px-3","custom-btn",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"span"],["src","../../../../assets/400x400.png","alt","","width","64px",1,"mx-3"],["alt","","width","64px",1,"mx-3",3,"src"],["id","GroupsDRequest",1,"Groups-content-display1"],["type","button",1,"btn","btn-outline-dark","btn-sm","rounded-pill","px-3","mt-3","custom-btn",3,"click"],[1,"fas","fa-undo"]],template:function(t,e){if(1&t&&(n.ac(0,"section",0),n.ac(1,"div",1),n.ac(2,"div",2),n.Wb(3,"app-toasterMsg",3),n.ac(4,"ul",4,5),n.ac(6,"li",6),n.ac(7,"a",7),n.Kc(8),n.nc(9,"translate"),n.Zb(),n.Ic(10,k,10,14,"ng-template",8),n.Zb(),n.ac(11,"li",6),n.ac(12,"a",7),n.Kc(13),n.nc(14,"translate"),n.Zb(),n.Ic(15,P,10,14,"ng-template",8),n.Zb(),n.ac(16,"div",9),n.ac(17,"a",10),n.Kc(18),n.nc(19,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Wb(20,"div",11),n.Zb(),n.Zb(),n.Zb()),2&t){const t=n.Cc(5);n.Jb(8),n.Lc(n.oc(9,6,"Groups")),n.Jb(5),n.Lc(n.oc(14,8,"Requests")),n.Jb(3),n.tc("ngClass",n.zc(12,O,"ar"==e.Lang,"en"==e.Lang)),n.Jb(1),n.tc("routerLink",n.xc(15,x)),n.Jb(1),n.Lc(n.oc(19,10,"Discover Groups")),n.Jb(2),n.tc("ngbNavOutlet",t)}},directives:[g,r.l,r.n,r.o,r.m,c.l,m.i,r.p,h.a,h.k,h.n,c.m,c.n],pipes:[f.c,v.a],styles:[".nav-tabs.nav[_ngcontent-%COMP%]{align-items:center}@media screen and (max-width:600px){ul.nav-tabs[_ngcontent-%COMP%]{font-size:14px}div.discover-btn[_ngcontent-%COMP%]{width:30%}div.discover-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;line-height:1}.custom-h1[_ngcontent-%COMP%]{font-size:30px}.custom-btn[_ngcontent-%COMP%]{font-size:12px}.custom-btn[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{display:none}.Groups-content-display1[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]{border:1px solid;background-color:#fff;border-radius:10px;padding:20px;margin-top:50px;margin-bottom:50px}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){border:none;transition:.3s}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child):hover{background-color:#eee}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .head-groups-page[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid #7dc0ff;font-weight:700}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .Groups-content-display2[_ngcontent-%COMP%]{padding:6px 12px}.custom-left-side-group[_ngcontent-%COMP%]{position:relative}.custom-left-side-group[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{position:absolute;top:60px}.content-groups[_ngcontent-%COMP%]   .Groups-content-display1[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%], .content-groups[_ngcontent-%COMP%]   .Groups-content-display2[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.75rem .25rem}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem;padding-right:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.ngb-toasts[_ngcontent-%COMP%]{right:40%!important;top:8%!important}"]}),t})();function L(t,e){if(1&t&&(n.ac(0,"li"),n.ac(1,"a",11),n.Wb(2,"i",12),n.Kc(3),n.Zb(),n.Zb()),2&t){const t=e.$implicit;n.Jb(1),n.vc("routerLink","/Group/group-profile/",t.id,""),n.Jb(2),n.Mc("",t.data.Name," ")}}const G=function(t){return{"text-right":t}},S=function(t){return{"pr-0":t}};let _=(()=>{class t{constructor(t,e){this.us=t,this.gp=e,this.counter=0,this.groups=[],this.subscription=[]}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.data=this.us.localUserData.asObservable();let t=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.firstName=t.firstName,this.lastName=t.lastName,this.avatar=t.avatar,this.jobTitle=t.jobTitle,this.avatarCover=t.avatarCover)});this.subscription.push(t),this.us.getUserData(this.userID).subscribe(t=>{this.counter=0,t.payload.get("groups").map(t=>{this.counter<5&&this.gp.getGrpById(t).subscribe(e=>{this.groups.push({id:t,data:e})})})})}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(o.a),n.Vb(a))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-left-side-group"]],decls:16,vars:15,consts:[[1,"card","custom-left-side-group"],[1,"card-img-top","userAvatarCover",3,"src"],[1,"card-body","text-center"],["width","50%",1,"img-thumbnail","rounded-circle",3,"src"],[1,"text-center","mt-5","mb-3"],[1,"text-muted"],[1,"card","mt-3"],[1,"card-body",3,"ngClass"],[1,"card-title","font-weight-bold"],[1,"list-unstyled","mt-2",3,"ngClass"],[4,"ngFor","ngForOf"],["href","#","routerLinkActive","router-link-active",1,"text-decoration-none","text-secondary",3,"routerLink"],[1,"fas","fa-users","mx-2"]],template:function(t,e){1&t&&(n.ac(0,"div",0),n.Wb(1,"img",1),n.ac(2,"div",2),n.Wb(3,"img",3),n.Zb(),n.ac(4,"div",4),n.ac(5,"h5"),n.Kc(6),n.Zb(),n.ac(7,"small",5),n.Kc(8),n.Zb(),n.Zb(),n.Zb(),n.ac(9,"div",6),n.ac(10,"div",7),n.ac(11,"span",8),n.Kc(12),n.nc(13,"translate"),n.Zb(),n.ac(14,"ul",9),n.Ic(15,L,4,2,"li",10),n.Zb(),n.Zb(),n.Zb()),2&t&&(n.Jb(1),n.tc("src",e.avatarCover,n.Ec),n.Jb(2),n.tc("src",e.avatar,n.Ec),n.Jb(3),n.Nc("",e.firstName," ",e.lastName,""),n.Jb(2),n.Lc(e.jobTitle),n.Jb(2),n.tc("ngClass",n.yc(11,G,"ar"==e.Lang)),n.Jb(2),n.Lc(n.oc(13,9,"Groups")),n.Jb(2),n.tc("ngClass",n.yc(13,S,"ar"==e.Lang)),n.Jb(1),n.tc("ngForOf",e.groups))},directives:[c.l,c.m,m.i,m.h],pipes:[f.c],styles:[".custom-left-side-group[_ngcontent-%COMP%]{position:relative}.custom-left-side-group[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{position:absolute;top:60px}.content-groups[_ngcontent-%COMP%]   .Groups-content-display1[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%], .content-groups[_ngcontent-%COMP%]   .Groups-content-display2[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.75rem .25rem}.userAvatarCover[_ngcontent-%COMP%]{height:135px}"]}),t})();var K=s("mrSG"),N=s("Vaw3");let W=(()=>{class t{constructor(t,e){this.db=t,this.afStorage=e}GroupPosts(t,e){return this.db.collection("PostGroup",s=>s.where("GroupId","==",t).limit(e).orderBy("PostedDate","desc")).snapshotChanges()}PostById(t){return this.db.collection("PostGroup").doc(t).snapshotChanges()}editPost(t,e,s){return this.db.collection("PostGroup").doc(t).update({Body:e,postImg:s})}writePost(t){return new Promise((e,s)=>{this.db.collection("PostGroup").add(t).then(t=>{},t=>s(t))})}uploadImg(t){return Object(K.b)(this,void 0,void 0,function*(){const e=[],s=[];for(let c of t){let t=c.name.split("."),n="";for(let e=0;e<=t.length&&e!=t.length-1;e++)n+=t[e];let i="GroupPostImg/"+n+"_"+(1024*Math.random()*1024).toString(36).substring(2);e.push(this.afStorage.ref(i)),s.push(yield this.afStorage.upload(i,c))}return{ref:e,task:s}})}giveLike(t,e){let s=this.PostById(e).subscribe(c=>{this.likes=c.payload.get("Likes"),-1!=this.likes.indexOf(t)?this.likes.splice(this.likes.indexOf(t),1):this.likes.push(t),this.db.collection("PostGroup").doc(e).update({Likes:this.likes}),s.unsubscribe()})}deletePost(t){return this.db.collection("PostGroup").doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(n.hc(i.a),n.hc(N.a))},t.\u0275prov=n.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const F=function(t){return{"m-0 p-0":t}},B=function(t){return{"text-right":t}};function R(t,e){if(1&t){const t=n.bc();n.ac(0,"div",2),n.ac(1,"h4",3),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"button",4),n.kc("click",function(){return(0,e.dismiss)("Cross click")}),n.ac(5,"span",5),n.Kc(6,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(7,"form",6),n.kc("ngSubmit",function(){return n.Dc(t),n.mc().onSubmit()}),n.ac(8,"div",7),n.ac(9,"div",8),n.Wb(10,"img",9),n.ac(11,"div",10),n.ac(12,"span"),n.ac(13,"strong"),n.Kc(14),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Wb(15,"hr"),n.ac(16,"div",11),n.ac(17,"textarea",12),n.nc(18,"translate"),n.Kc(19,"                "),n.Zb(),n.Zb(),n.ac(20,"div",11),n.Wb(21,"input",13),n.Zb(),n.ac(22,"div",11),n.Wb(23,"input",14),n.Zb(),n.ac(24,"div",11),n.Wb(25,"input",15),n.Zb(),n.Zb(),n.ac(26,"div",16),n.ac(27,"button",17),n.kc("click",function(){return(0,e.close)("Save click")}),n.Kc(28),n.nc(29,"translate"),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc();n.Jb(2),n.Lc(n.oc(3,11,"Create a post")),n.Jb(2),n.tc("ngClass",n.yc(17,F,"ar"==t.Lang)),n.Jb(3),n.tc("formGroup",t.postForm),n.Jb(1),n.tc("ngClass",n.yc(19,B,"ar"==t.Lang)),n.Jb(2),n.tc("src",t.avatar,n.Ec),n.Jb(4),n.Nc("",t.firstName," ",t.lastName,""),n.Jb(3),n.uc("placeholder",n.oc(18,13,"What Do You Think About?!...")),n.Jb(4),n.tc("value",t.getId),n.Jb(6),n.tc("disabled",!t.postForm.valid),n.Jb(1),n.Lc(n.oc(29,15,"Post"))}}let U=(()=>{class t{constructor(t,e,s,c,n){this.model=t,this.grpService=e,this.fb=s,this.us=c,this.toastService=n,this.closeResult="",this.subscriptions=[],this.data=this.us.localUserData.asObservable();let i=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.firstName=t.firstName,this.lastName=t.lastName,this.jobTitle=t.jobTitle,this.avatar=t.avatar)});this.subscriptions.push(i),this.postForm=this.fb.group({GroupId:"",Likes:[[]],Body:"",PostedDate:new Date,Auther:{avatar:this.avatar,firstName:this.firstName,lastName:this.lastName,id:this.userID,jobTitle:this.jobTitle},postImg:[[]]})}open(t){this.model.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===r.a.ESC?"by pressing ESC":t===r.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.postForm=this.fb.group({GroupId:this.SelectedGroupId,Likes:[[]],Body:"",PostedDate:new Date,Auther:{avatar:this.avatar,firstName:this.firstName,lastName:this.lastName,id:this.userID,jobTitle:this.jobTitle},postImg:[[]]})}onSubmit(){return Object(K.b)(this,void 0,void 0,function*(){const t=document.getElementById("Img").files;if(t.length>0){const e=yield this.grpService.uploadImg(t);let s=[],c=this.postForm.value.Body;for(let t=0;t<e.ref.length;t++)yield e.ref[t].getDownloadURL().subscribe(n=>Object(K.b)(this,void 0,void 0,function*(){s.push(n),t==e.ref.length-1&&(this.postForm.value.postImg=s,this.postForm.value.Body=c,this.grpService.writePost(this.postForm.value))}))}else this.postForm.value.Body=this.postForm.value.Body,this.grpService.writePost(this.postForm.value);this.postForm=this.fb.group({GroupId:this.SelectedGroupId,Likes:[[]],Body:"",PostedDate:new Date,Auther:{avatar:this.avatar,firstName:this.firstName,lastName:this.lastName,id:this.userID,jobTitle:this.jobTitle},postImg:[[]]}),this.showMsg()})}showMsg(){"en"==this.Lang?this.toastService.show("You Have New Post",{classname:"bg-success text-light",delay:5e3}):this.toastService.show("\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0648\u0636\u0639 \u0645\u0646\u0634\u0648\u0631 \u062c\u062f\u064a\u062f",{classname:"bg-success text-right text-light",delay:5e3})}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.i),n.Vb(W),n.Vb(h.b),n.Vb(o.a),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-write-box-model"]],inputs:{SelectedGroupId:"SelectedGroupId"},decls:5,vars:3,consts:[["content",""],["id","writePost",1,"btn","btn-lg","btn-outline-primary",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"ngClass","click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body",3,"ngClass"],[1,"px-2"],["alt","Card image",1,"mx-2",2,"width","10%","border-radius","50%",3,"src"],[1,"ml-2",2,"display","inline-block"],[1,"form-group"],["formControlName","Body","name","Body","rows","5","required","",1,"form-control",3,"placeholder"],["type","hidden","formControlName","GroupId",1,"form-control",3,"value"],["type","hidden","formControlName","Likes","value","0",1,"form-control"],["type","file","id","Img","multiple","true","name","postImg","formControlName","postImg",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-primary",3,"disabled","click"]],template:function(t,e){if(1&t){const t=n.bc();n.Ic(0,R,30,21,"ng-template",null,0,n.Jc),n.ac(2,"button",1),n.kc("click",function(){n.Dc(t);const s=n.Cc(1);return e.open(s)}),n.Kc(3),n.nc(4,"translate"),n.Zb()}2&t&&(n.Jb(3),n.Lc(n.oc(4,1,"Write a post")))},directives:[c.l,h.t,h.l,h.e,h.a,h.k,h.d,h.q],pipes:[f.c],styles:["#writePost[_ngcontent-%COMP%]{width:80%;border-radius:1.2em;background-color:hsla(0,4%,56%,.261);border:1px solid hsla(0,4%,56%,.261);color:#464343;padding:.35em;font-size:16px}@media screen and (max-width:450px){#writePost[_ngcontent-%COMP%]{width:100%}}.btn[_ngcontent-%COMP%]:focus{box-shadow:none}"]}),t})();var $=s("dlKe"),T=s("2Vo4");let j=(()=>{class t{constructor(t){this.db=t,this.postCounts=new T.a(4)}getPostComments2(t,e){return null!=e?this.db.collection("PostGroup").doc(t).collection("Comments",t=>t.orderBy("CommentDate","desc").limit(5).startAfter(e)).snapshotChanges():this.db.collection("PostGroup").doc(t).collection("Comments",t=>t.orderBy("CommentDate","desc").limit(5)).snapshotChanges()}deleteComment(t,e){return this.db.collection("PostGroup").doc(e).collection("Comments").doc(t).delete()}getCommentById(t,e){return this.db.collection("PostGroup").doc(t).collection("Comments").doc(e).valueChanges()}writeComment(t,e){return new Promise((s,c)=>{this.db.collection("PostGroup").doc(e).collection("Comments").add(t).then(t=>{},t=>c(t))})}editComment(t,e,s){return this.db.collection("PostGroup").doc(t).collection("Comments").doc(e).update({Body:s})}getMore(){this.postCounts.next(this.postCounts.value+4)}}return t.\u0275fac=function(e){return new(e||t)(n.hc(i.a))},t.\u0275prov=n.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),V=(()=>{class t{constructor(t,e,s){this.commentService=t,this.fb=e,this.us=s,this.subscription=[],this.data=this.us.localUserData.asObservable();let c=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.firstName=t.firstName,this.lastName=t.lastName,this.jobTitle=t.jobTitle,this.avatar=t.avatar)});this.subscription.push(c),this.commentForm=this.fb.group({Body:"",CommentDate:new Date,User:{firstName:"",lastName:"",jobTitle:"",avatar:"",id:""}})}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.commentForm=this.fb.group({Body:"",CommentDate:new Date,User:{firstName:this.firstName,lastName:this.lastName,jobTitle:this.jobTitle,avatar:this.avatar,id:this.userID}})}onSubmit(){this.commentService.writeComment(this.commentForm.value,this.defPostId),this.commentForm=this.fb.group({Body:"",CommentDate:new Date,User:{firstName:this.firstName,lastName:this.lastName,jobTitle:this.jobTitle,avatar:this.avatar,id:this.userID}})}ngOnDestroy(){this.subscription.forEach(t=>{t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(j),n.Vb(h.b),n.Vb(o.a))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-comment-form"]],inputs:{defPostId:"defPostId"},decls:3,vars:4,consts:[[3,"formGroup","ngSubmit"],["id","comment-input","type","text","formControlName","Body",1,"form-control",3,"placeholder"]],template:function(t,e){1&t&&(n.ac(0,"form",0),n.kc("ngSubmit",function(){return e.onSubmit()}),n.Wb(1,"input",1),n.nc(2,"translate"),n.Zb()),2&t&&(n.tc("formGroup",e.commentForm),n.Jb(1),n.uc("placeholder",n.oc(2,2,"Start a Conversation in this Post")))},directives:[h.t,h.l,h.e,h.a,h.k,h.d],pipes:[f.c],styles:["@media screen and (max-width:450px){#comment-input[_ngcontent-%COMP%]{width:100%;font-size:12px}}"]}),t})();const E=function(t){return{"m-0 p-0":t}};function A(t,e){if(1&t){const t=n.bc();n.ac(0,"div",2),n.ac(1,"h6",3),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"button",4),n.kc("click",function(){return(0,e.dismiss)("Cross click")}),n.ac(5,"span",5),n.Kc(6,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(7,"form",6),n.kc("ngSubmit",function(){return n.Dc(t),n.mc().updateComment()}),n.ac(8,"div",7),n.ac(9,"div",8),n.Wb(10,"textarea",9),n.nc(11,"translate"),n.Zb(),n.Zb(),n.ac(12,"div",10),n.ac(13,"button",11),n.kc("click",function(){return(0,e.close)("Save click")}),n.Kc(14),n.nc(15,"translate"),n.Zb(),n.ac(16,"button",12),n.kc("click",function(){return(0,e.close)("Save click")}),n.Kc(17),n.nc(18,"translate"),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc();n.Jb(2),n.Lc(n.oc(3,7,"Edit Comment")),n.Jb(2),n.tc("ngClass",n.yc(15,E,"ar"==t.Lang)),n.Jb(3),n.tc("formGroup",t.editCommentForm),n.Jb(3),n.uc("placeholder",n.oc(11,9,"Type Your Edit Comment...")),n.Jb(4),n.Lc(n.oc(15,11,"Cancel")),n.Jb(2),n.tc("disabled",!t.editCommentForm.valid),n.Jb(1),n.Lc(n.oc(18,13,"Edit"))}}const q=function(t){return{"text-right":t}};let z=(()=>{class t{constructor(t,e,s,c){this.model=t,this.FB=e,this.commentService=s,this.toastService=c,this.closeResult="",this.editCommentForm=this.FB.group({Body:""})}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.commentService.getCommentById(this.postID,this.commentID).subscribe(t=>{this.singleComment=t,null!=this.singleComment&&(this.editCommentForm=this.FB.group({Body:this.singleComment.Body}))})}updateComment(){this.commentService.editComment(this.postID,this.commentID,this.editCommentForm.value.Body),this.editCommentForm=this.FB.group({Body:""}),this.showMsg()}open(t){this.model.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}showMsg(){"en"==this.Lang?this.toastService.show("Comment Edited",{classname:"bg-info text-light",delay:5e3}):this.toastService.show("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062a\u0639\u0644\u064a\u0642",{classname:"bg-info text-right text-light",delay:5e3})}getDismissReason(t){return t===r.a.ESC?"by pressing ESC":t===r.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.i),n.Vb(h.b),n.Vb(j),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-edit-comment"]],inputs:{commentID:"commentID",postID:"postID"},decls:5,vars:6,consts:[["editComment",""],["ngbDropdownItem","",3,"ngClass","click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"ngClass","click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"form-group"],["name","Body","formControlName","Body","rows","5","required","",1,"form-control",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],["type","submit",1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"]],template:function(t,e){if(1&t){const t=n.bc();n.Ic(0,A,19,17,"ng-template",null,0,n.Jc),n.ac(2,"button",1),n.kc("click",function(){n.Dc(t);const s=n.Cc(1);return e.open(s)}),n.Kc(3),n.nc(4,"translate"),n.Zb()}2&t&&(n.Jb(2),n.tc("ngClass",n.yc(4,q,"ar"==e.Lang)),n.Jb(1),n.Lc(n.oc(4,2,"Edit")))},directives:[r.f,c.l,h.t,h.l,h.e,h.a,h.k,h.d,h.q],pipes:[f.c],styles:[""]}),t})();const Y=function(t){return{"text-right":t}};function H(t,e){if(1&t){const t=n.bc();n.ac(0,"div"),n.ac(1,"div",18),n.ac(2,"a",19),n.Wb(3,"i",20),n.Zb(),n.ac(4,"div",21),n.Wb(5,"app-edit-comment",22),n.Wb(6,"div",23),n.ac(7,"button",24),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc();return s.deleteComment(e.id,s.PostID)}),n.Kc(8),n.nc(9,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc(2).$implicit,e=n.mc();n.Jb(5),n.tc("commentID",t.id)("postID",e.PostID),n.Jb(2),n.tc("ngClass",n.yc(6,Y,"ar"==e.Lang)),n.Jb(1),n.Lc(n.oc(9,4,"Delete"))}}function X(t,e){if(1&t&&(n.ac(0,"div",16),n.Ic(1,H,10,8,"div",17),n.Zb()),2&t){const t=n.mc().$implicit,e=n.mc();n.Jb(1),n.tc("ngIf",e.admins.includes(e.userID)||t.User.id===e.userID)}}function Q(t,e){if(1&t&&(n.ac(0,"div"),n.ac(1,"div",3),n.ac(2,"div",4),n.ac(3,"div",5),n.ac(4,"div",6),n.ac(5,"div",1),n.ac(6,"div",7),n.Wb(7,"img",8),n.ac(8,"div",9),n.ac(9,"span",10),n.ac(10,"a",11),n.Kc(11),n.Zb(),n.Zb(),n.ac(12,"small",12),n.Kc(13),n.nc(14,"date"),n.Zb(),n.Zb(),n.Ic(15,X,2,1,"div",13),n.Zb(),n.Zb(),n.ac(16,"div",14),n.ac(17,"p",15),n.Kc(18),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb()),2&t){const t=e.$implicit,s=n.mc();n.Jb(7),n.tc("src",t.User.avatar,n.Ec),n.Jb(3),n.vc("routerLink","/profile/",t.User.id,""),n.Jb(1),n.Nc(" ",t.User.firstName," ",t.User.lastName," "),n.Jb(2),n.Lc(n.oc(14,7,t.CommentDate.toDate())),n.Jb(2),n.tc("ngIf",null!=s.admins),n.Jb(3),n.Lc(t.Body)}}const tt=function(t){return{"d-none":t}};let et=(()=>{class t{constructor(t,e,s){this.commentService=t,this.us=e,this.toastService=s,this.subscriptions=[],this.getComments=[],this.turnOff=!1,this.counter=0}identify(t,e){return e.id}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.data=this.us.localUserData.asObservable();let t=this.data.subscribe(t=>{null!=t&&(this.userID=t.id)});this.subscriptions.push(t);let e=this.commentService.getPostComments2(this.PostID).subscribe(t=>{this.getComments=t.map(t=>Object.assign(Object.assign({id:t.payload.doc.id},t.payload.doc.data()),{doc:t.payload.doc})),this.hideBtn(t)});this.subscriptions.push(e)}loadMore(){this.counter+=5,this.commentService.getPostComments2(this.PostID,this.getComments[this.getComments.length-1].doc).subscribe(t=>{t.map(t=>{this.getComments.push(Object.assign(Object.assign({id:t.payload.doc.id},t.payload.doc.data()),{doc:t.payload.doc}))}),this.hideBtn(t)})}hideBtn(t){this.turnOff=t.length%5!=0&&t.length-this.counter==0||t.length%5!=0||0==t.length}deleteComment(t,e){this.showMsg(),this.commentService.deleteComment(t,e)}showMsg(){"en"==this.Lang?this.toastService.show("Comment Deleted",{classname:"bg-danger text-light",delay:5e3}):this.toastService.show("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062a\u0639\u0644\u064a\u0642",{classname:"bg-danger text-right text-light",delay:5e3})}ngOnDestroy(){for(let t of this.subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(j),n.Vb(o.a),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-post-comments"]],inputs:{PostID:"PostID",admins:"admins"},decls:5,vars:8,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[1,""],[1,"btn","btn-link","text-decoration-none","custom-btn-link-more",3,"ngClass","click"],[1,"container-fluid","mt-1","mb-1"],[1,"justify-content-center","row"],[1,"col-md-12"],[1,"py-2","px-4","mt-2","comment-design"],[1,"d-flex","flex-row","user","align-items-center"],["width","40",1,"rounded-circle","img-fluid","img-responsive",3,"src"],[1,"d-flex","flex-column","mx-2","w-100","user-titles"],[1,"font-weight-bold"],[1,"text-decoration-none","text-dark",3,"routerLink"],[1,"day","text-muted"],["class","d-flex flex-column ml-auto",4,"ngIf"],[1,"comment-text","text-justify","mt-2","ml-5"],[1,"mb-1"],[1,"d-flex","flex-column","ml-auto"],[4,"ngIf"],["ngbDropdown","","container","body"],["type","button","ngbDropdownToggle","",1,"btn","btn-default","p-0"],[1,"fas","fa-ellipsis-h"],["ngbDropdownMenu",""],[3,"commentID","postID"],[1,"dropdown-divider"],["ngbDropdownItem","",3,"ngClass","click"]],template:function(t,e){1&t&&(n.Ic(0,Q,19,9,"div",0),n.ac(1,"div",1),n.ac(2,"button",2),n.kc("click",function(){return e.loadMore()}),n.Kc(3),n.nc(4,"translate"),n.Zb(),n.Zb()),2&t&&(n.tc("ngForOf",e.getComments)("ngForTrackBy",e.identify),n.Jb(2),n.tc("ngClass",n.yc(6,tt,1==e.turnOff)),n.Jb(1),n.Lc(n.oc(4,4,"Load More Comments")))},directives:[c.m,c.l,m.i,c.n,r.e,r.h,r.g,z,r.f],pipes:[f.c,c.e],styles:[".comment-design[_ngcontent-%COMP%]{background-color:#eee;border-radius:15px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn[_ngcontent-%COMP%]{outline:none;box-shadow:none}@media screen and (max-width:450px){.img-fluid[_ngcontent-%COMP%]{height:40px}.user-titles[_ngcontent-%COMP%]{font-size:14px}.comment-text[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.comment-text[_ngcontent-%COMP%], .custom-btn-link-more[_ngcontent-%COMP%]{font-size:13px}}"]}),t})();function st(t,e){if(1&t){const t=n.bc();n.ac(0,"div",16),n.ac(1,"i",17),n.kc("click",function(){n.Dc(t);const s=e.index;return n.mc(2).deleteImg(s)}),n.Zb(),n.Wb(2,"img",18),n.Zb()}if(2&t){const t=e.$implicit;n.Jb(2),n.uc("src",t,n.Ec)}}const ct=function(t){return{"m-0 p-0":t}};function nt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",2),n.ac(1,"h6",3),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"button",4),n.kc("click",function(){return(0,e.dismiss)("Cross click")}),n.ac(5,"span",5),n.Kc(6,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(7,"form",6),n.kc("ngSubmit",function(){return n.Dc(t),n.mc().updatePost()}),n.ac(8,"div",7),n.ac(9,"div",8),n.Wb(10,"textarea",9),n.Zb(),n.ac(11,"div",10),n.Ic(12,st,3,1,"div",11),n.Zb(),n.ac(13,"div",8),n.Wb(14,"input",12),n.Zb(),n.Zb(),n.ac(15,"div",13),n.ac(16,"button",14),n.kc("click",function(){return(0,e.close)("Save click")}),n.Kc(17),n.nc(18,"translate"),n.Zb(),n.ac(19,"button",15),n.kc("click",function(){return(0,e.close)("Save click")}),n.Kc(20),n.nc(21,"translate"),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc();n.Jb(2),n.Lc(n.oc(3,7,"Edit Post")),n.Jb(2),n.tc("ngClass",n.yc(13,ct,"ar"==t.Lang)),n.Jb(3),n.tc("formGroup",t.editPostForm),n.Jb(5),n.tc("ngForOf",t.images),n.Jb(5),n.Lc(n.oc(18,9,"Cancel")),n.Jb(2),n.tc("disabled",!t.editPostForm.valid),n.Jb(1),n.Lc(n.oc(21,11,"Edit"))}}const it=function(t){return{"text-right":t}};let ot=(()=>{class t{constructor(t,e,s,c){this.model=t,this.FB=e,this.postService=s,this.toastService=c,this.closeResult="",this.images=[],this.editPostForm=this.FB.group({Body:""})}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.postService.PostById(this.postID).subscribe(t=>{this.singlePost=t.payload.data(),null!=this.singlePost&&(this.editPostForm=this.FB.group({Body:this.singlePost.Body,postImg:[[]]}),this.images=this.singlePost.postImg)})}deleteImg(t){this.showMsgImg(),this.images.splice(t,1)}updatePost(){return Object(K.b)(this,void 0,void 0,function*(){this.showMsg();const t=document.getElementById("Img").files;if(t.length>0){const e=yield this.postService.uploadImg(t);let s=this.editPostForm.value.Body;for(let t=0;t<e.ref.length;t++)yield e.ref[t].getDownloadURL().subscribe(c=>Object(K.b)(this,void 0,void 0,function*(){this.images.push(c),t==e.ref.length-1&&(this.editPostForm.value.postImg=this.images,this.editPostForm.value.Body=s,this.postService.editPost(this.postID,this.editPostForm.value.Body,this.images))}))}else this.editPostForm.value.Body=this.editPostForm.value.Body,this.postService.editPost(this.postID,this.editPostForm.value.Body,this.images);this.editPostForm=this.FB.group({Body:"",postImg:[[]]})})}open(t){this.model.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}showMsg(){"en"==this.Lang?this.toastService.show("Edited Succeeded",{classname:"bg-info text-light",delay:5e3}):this.toastService.show("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644",{classname:"bg-info text-right text-light",delay:5e3})}showMsgImg(){"en"==this.Lang?this.toastService.show("Image Deleted",{classname:"bg-danger text-light",delay:5e3}):this.toastService.show("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629",{classname:"bg-danger text-right text-light",delay:5e3})}getDismissReason(t){return t===r.a.ESC?"by pressing ESC":t===r.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.i),n.Vb(h.b),n.Vb(W),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-edit-post"]],inputs:{postID:"postID"},decls:5,vars:6,consts:[["editPost",""],["ngbDropdownItem","",3,"ngClass","click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"ngClass","click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"form-group"],["name","Body","formControlName","Body","rows","5","placeholder","Type Your Edit...","required","",1,"form-control"],[1,"row"],["class","col-6 py-2",4,"ngFor","ngForOf"],["type","file","id","Img","multiple","true","name","postImg","formControlName","postImg",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],["type","submit",1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],[1,"col-6","py-2"],["placement","top","ngbTooltip","Delete",1,"far","fa-times-circle","text-danger",3,"click"],["alt","",1,"img-fluid","custom-img",3,"src"]],template:function(t,e){if(1&t){const t=n.bc();n.Ic(0,nt,22,15,"ng-template",null,0,n.Jc),n.ac(2,"button",1),n.kc("click",function(){n.Dc(t);const s=n.Cc(1);return e.open(s)}),n.Kc(3),n.nc(4,"translate"),n.Zb()}2&t&&(n.Jb(2),n.tc("ngClass",n.yc(4,it,"ar"==e.Lang)),n.Jb(1),n.Lc(n.oc(4,2,"Edit")))},directives:[r.f,c.l,h.t,h.l,h.e,h.a,h.k,h.d,h.q,c.m,r.s],pipes:[f.c],styles:[".row[_ngcontent-%COMP%]{align-items:center}.custom-img[_ngcontent-%COMP%]{border:1px solid #ddd}"]}),t})();const at=function(t){return{"text-right":t}};function rt(t,e){if(1&t&&(n.ac(0,"div"),n.ac(1,"div",7),n.ac(2,"ngb-alert"),n.ac(3,"h5"),n.Kc(4),n.nc(5,"translate"),n.Zb(),n.ac(6,"p"),n.Kc(7),n.nc(8,"translate"),n.Zb(),n.Wb(9,"img",8),n.Zb(),n.Zb(),n.Zb()),2&t){const t=n.mc();n.Jb(1),n.tc("ngClass",n.yc(7,at,"ar"==t.Lang)),n.Jb(3),n.Lc(n.oc(5,3,"Notes : ")),n.Jb(3),n.Lc(n.oc(8,5,"There is no posts yet"))}}function lt(t,e){if(1&t){const t=n.bc();n.ac(0,"div"),n.ac(1,"div",33),n.ac(2,"button",34),n.Wb(3,"i",35),n.Zb(),n.ac(4,"div",36),n.ac(5,"div"),n.Wb(6,"app-edit-post",37),n.Zb(),n.Wb(7,"div",38),n.ac(8,"button",39),n.kc("click",function(){n.Dc(t);const e=n.mc().$implicit;return n.mc().deletePost(e.id)}),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc().$implicit,e=n.mc();n.Jb(6),n.tc("postID",t.id),n.Jb(2),n.tc("ngClass",n.yc(5,at,"ar"==e.Lang)),n.Jb(1),n.Lc(n.oc(10,3,"Delete"))}}const dt=function(t){return{"m-0 p-0":t}};function ut(t,e){if(1&t&&(n.ac(0,"div",43),n.ac(1,"button",44),n.kc("click",function(){return e.$implicit.dismiss("Cross click")}),n.ac(2,"span",45),n.Kc(3,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(4,"div",46),n.Wb(5,"img",47),n.Zb(),n.ac(6,"div",48),n.ac(7,"button",49),n.kc("click",function(){return e.$implicit.close("Close click")}),n.Kc(8),n.nc(9,"translate"),n.Zb(),n.Zb()),2&t){const t=n.mc().$implicit,e=n.mc(2);n.Jb(1),n.tc("ngClass",n.yc(5,dt,"ar"==e.Lang)),n.Jb(4),n.uc("src",t,n.Ec),n.Jb(3),n.Lc(n.oc(9,3,"Close"))}}function bt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",40),n.ac(1,"img",41),n.kc("click",function(){n.Dc(t);const e=n.Cc(3);return n.mc(2).openLg(e)}),n.Zb(),n.Ic(2,ut,10,7,"ng-template",null,42,n.Jc),n.Zb()}if(2&t){const t=e.$implicit;n.Jb(1),n.uc("src",t,n.Ec)}}function pt(t,e){1&t&&(n.ac(0,"span"),n.Wb(1,"i",50),n.Kc(2),n.nc(3,"translate"),n.Zb()),2&t&&(n.Jb(2),n.Mc(" ",n.oc(3,1,"Like"),""))}function gt(t,e){1&t&&(n.ac(0,"span",51),n.Wb(1,"i",52),n.Kc(2),n.nc(3,"translate"),n.Zb()),2&t&&(n.Jb(2),n.Mc(" ",n.oc(3,1,"Unlike"),""))}function mt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",9),n.ac(1,"div",10),n.ac(2,"div",11),n.Wb(3,"img",12),n.ac(4,"div",13),n.ac(5,"h6",14),n.ac(6,"a",15),n.Kc(7),n.Zb(),n.Zb(),n.ac(8,"div",16),n.ac(9,"small",17),n.Kc(10),n.Zb(),n.ac(11,"small",18),n.Kc(12),n.nc(13,"date"),n.Zb(),n.Zb(),n.Zb(),n.Ic(14,lt,11,7,"div",3),n.Zb(),n.ac(15,"div",19),n.Kc(16),n.Zb(),n.ac(17,"div",20),n.Ic(18,bt,4,1,"div",21),n.Zb(),n.ac(19,"div",22),n.ac(20,"small"),n.Kc(21),n.nc(22,"translate"),n.Zb(),n.Zb(),n.ac(23,"div",23),n.ac(24,"button",24),n.kc("click",function(){n.Dc(t);const s=e.$implicit,c=n.mc();return c.Like(c.userID,s.id)}),n.Ic(25,pt,4,3,"span",3),n.Ic(26,gt,4,3,"span",25),n.Zb(),n.ac(27,"label",26),n.Wb(28,"i",27),n.Kc(29),n.nc(30,"translate"),n.Zb(),n.Zb(),n.ac(31,"div",28),n.Wb(32,"img",29),n.ac(33,"div",30),n.Wb(34,"app-comment-form",31),n.Zb(),n.Zb(),n.Wb(35,"app-post-comments",32),n.Zb(),n.Zb()}if(2&t){const t=e.$implicit,s=n.mc();n.Jb(1),n.tc("ngClass",n.yc(25,at,"ar"==s.Lang)),n.Jb(2),n.tc("src",t.data.Auther.avatar,n.Ec),n.Jb(3),n.vc("routerLink","/profile/",t.data.Auther.id,""),n.Jb(1),n.Nc(" ",t.data.Auther.firstName," ",t.data.Auther.lastName," "),n.Jb(3),n.Lc(t.data.Auther.jobTitle),n.Jb(2),n.Lc(n.oc(13,19,t.data.PostedDate.toDate())),n.Jb(2),n.tc("ngIf",s.adminGroup.includes(s.userID)||t.data.Auther.id===s.userID),n.Jb(2),n.Mc(" ",t.data.Body," "),n.Jb(2),n.tc("ngForOf",t.data.postImg),n.Jb(3),n.Nc("",t.data.Likes.length," ",n.oc(22,21,"Likes"),""),n.Jb(4),n.tc("ngIf",!t.data.Likes.includes(s.userID)),n.Jb(1),n.tc("ngIf",t.data.Likes.includes(s.userID)),n.Jb(3),n.Lc(n.oc(30,23,"Comment")),n.Jb(3),n.tc("src",s.avatar,n.Ec),n.Jb(2),n.tc("defPostId",t.id),n.Jb(1),n.tc("PostID",t.id)("admins",s.adminGroup)}}let ht=(()=>{class t{constructor(t,e,s,c,n,i){this.getall=t,this.groupService=e,this.us=s,this.modalService=c,this.toastService=i,this.subsriptions=[],this.postGroupList=[],this.adminGroup=[],this.viewImg=!1,this.throttle=300,this.scrollDistance=1,this.scrollUpDistance=2,this.limits=5,n.type="info",n.dismissible=!1,this.data=this.us.localUserData.asObservable();let o=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.avatar=t.avatar)});this.subsriptions.push(o)}identify(t,e){return e.id}ngOnInit(){this.Lang=localStorage.getItem("lang");let t=this.groupService.getGroupsUsers(this.GroupId).subscribe(t=>{t.map(t=>{1==t.payload.doc.data().Role&&this.adminGroup.push(t.payload.doc.id)})});this.subsriptions.push(t);let e=this.getall.GroupPosts(this.GroupId,this.limits).subscribe(t=>{this.postGroupList=t.map(t=>({id:t.payload.doc.id,data:t.payload.doc.data()}))});this.subsriptions.push(e)}openLg(t){this.modalService.open(t,{size:"lg"})}Like(t,e){this.getall.giveLike(t,e)}deletePost(t){this.showMsg(),this.getall.deletePost(t)}showMsg(){"en"==this.Lang?this.toastService.show("Deleted Post",{classname:"bg-danger text-light",delay:5e3}):this.toastService.show("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u0634\u0648\u0631",{classname:"bg-danger text-right text-light",delay:5e3})}onScrollDown(){this.limits+=5,this.getall.GroupPosts(this.GroupId,this.limits).subscribe(t=>{this.postGroupList=t.map(t=>({id:t.payload.doc.id,data:t.payload.doc.data()}))})}ngOnDestroy(){for(let t of this.subsriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(W),n.Vb(a),n.Vb(o.a),n.Vb(r.i),n.Vb(r.c),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-group-posts"]],inputs:{GroupId:"GroupId"},decls:9,vars:13,consts:[[1,"form-group","has-search","pt-3"],[1,"fa","fa-search","form-control-feedback"],["type","text","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[4,"ngIf"],["aria-live","polite","aria-atomic","true"],["data-infinite-scroll","","debounce","",1,"search-results",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled"],["class","card mt-3",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],["src","../../../../assets/writepost.jpg",1,"img-fluid"],[1,"card","mt-3"],[1,"card-body",3,"ngClass"],[1,"media","align-items-center"],["alt","","width","64px","height","64",1,"mx-3","rounded-circle",3,"src"],[1,"media-body"],[1,"mt-1","mb-1"],["href","",1,"text-dark","text-decoration-none",3,"routerLink"],[1,"custom-titles"],[1,"text-muted"],[1,"text-muted","d-block"],[1,"p-1","my-2","post-body"],[1,"row"],["class","users-post-groups col-md-6",4,"ngFor","ngForOf"],[1,"text-secondary","pt-2"],[1,"post-actions-groups","mt-2"],[1,"btn","btn-default","custom-btns",3,"click"],["class","font-weight-bold",4,"ngIf"],[1,"btn","mb-0","custom-btns"],[1,"far","fa-comment","mx-2"],[1,"user-right-comments","row","mt-3"],[1,"rounded-circle","col-2","comment-avatar",3,"src"],[1,"col-9","mt-md-4","mt-lg-2","mr-2","p-0","comment-form"],[3,"defPostId"],[3,"PostID","admins"],["ngbDropdown","","container","body",1,"d-inline"],["type","button","ngbDropdownToggle","",1,"btn","btn-default"],[1,"fas","fa-ellipsis-h"],["ngbDropdownMenu",""],[3,"postID"],[1,"dropdown-divider"],["ngbDropdownItem","",3,"ngClass","click"],[1,"users-post-groups","col-md-6"],["alt","",1,"img-fluid",3,"src","click"],["content",""],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"ngClass","click"],["aria-hidden","true"],[1,"modal-body","text-center"],["alt","",1,"img-fluid",3,"src"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"far","fa-thumbs-up","mr-2"],[1,"font-weight-bold"],[1,"fas","fa-thumbs-up","mx-2"]],template:function(t,e){1&t&&(n.ac(0,"div",0),n.Wb(1,"span",1),n.ac(2,"input",2),n.kc("ngModelChange",function(t){return e.keyWordsSearch=t}),n.nc(3,"translate"),n.Zb(),n.Zb(),n.Ic(4,rt,10,9,"div",3),n.Wb(5,"app-toasterMsg",4),n.ac(6,"div",5),n.kc("scrolled",function(){return e.onScrollDown()}),n.Ic(7,mt,36,27,"div",6),n.nc(8,"filter"),n.Zb()),2&t&&(n.Jb(2),n.uc("placeholder",n.oc(3,8,"Searching For ?...")),n.tc("ngModel",e.keyWordsSearch),n.Jb(2),n.tc("ngIf",0==e.postGroupList.length),n.Jb(2),n.tc("infiniteScrollDistance",e.scrollDistance)("infiniteScrollUpDistance",e.scrollUpDistance)("infiniteScrollThrottle",e.throttle),n.Jb(1),n.tc("ngForOf",n.pc(8,10,e.postGroupList,e.keyWordsSearch))("ngForTrackBy",e.identify))},directives:[h.a,h.k,h.n,c.n,g,$.a,c.m,c.l,r.b,m.i,V,et,r.e,r.h,r.g,ot,r.f],pipes:[f.c,v.a,c.e],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn[_ngcontent-%COMP%]{outline:none;box-shadow:none}.users-post-groups[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.users-post-groups[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:30vh}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem;padding-right:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}@media screen and (max-width:450px){.custom-titles[_ngcontent-%COMP%]{font-size:11px}.custom-btns[_ngcontent-%COMP%], .post-body[_ngcontent-%COMP%]{font-size:14px}.comment-avatar[_ngcontent-%COMP%]{display:none}.user-right-comments[_ngcontent-%COMP%]{justify-content:center}}.ngb-toasts[_ngcontent-%COMP%]{right:40%!important;top:8%!important}"]}),t})();function ft(t,e){if(1&t&&(n.ac(0,"section",20),n.ac(1,"div",21),n.ac(2,"div",22),n.Wb(3,"img",23),n.Wb(4,"app-write-box-model",24),n.ac(5,"div",25),n.Wb(6,"br"),n.Zb(),n.ac(7,"div",26),n.ac(8,"a",27),n.ac(9,"div",28),n.Wb(10,"i",29),n.ac(11,"span",30),n.Kc(12),n.nc(13,"translate"),n.Zb(),n.Zb(),n.Zb(),n.ac(14,"a",27),n.ac(15,"div",28),n.Wb(16,"i",31),n.ac(17,"span",30),n.Kc(18),n.nc(19,"translate"),n.Zb(),n.Zb(),n.Zb(),n.ac(20,"a",27),n.ac(21,"div",28),n.Wb(22,"i",32),n.ac(23,"span",30),n.Kc(24),n.nc(25,"translate"),n.Zb(),n.Zb(),n.Zb(),n.ac(26,"a",27),n.ac(27,"div",28),n.Wb(28,"i",33),n.ac(29,"span",30),n.Kc(30),n.nc(31,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.ac(32,"div",34),n.Wb(33,"app-group-posts",35),n.Zb(),n.Zb()),2&t){const t=n.mc(3);n.Jb(3),n.tc("src",t.avatar,n.Ec),n.Jb(1),n.tc("SelectedGroupId",t.GroupId),n.Jb(8),n.Mc(" ",n.oc(13,7,"Photos"),""),n.Jb(6),n.Mc(" ",n.oc(19,9,"Video"),""),n.Jb(6),n.Mc(" ",n.oc(25,11,"Events"),""),n.Jb(6),n.Mc(" ",n.oc(31,13,"Article"),""),n.Jb(3),n.tc("GroupId",t.GroupId)}}function vt(t,e){if(1&t&&(n.ac(0,"div"),n.Ic(1,ft,34,15,"section",19),n.Zb()),2&t){n.mc();const t=n.Cc(29),e=n.mc();n.Jb(1),n.tc("ngIf",e.admin.includes(e.userID)||e.member.includes(e.userID))("ngIfElse",t)}}function Ct(t,e){1&t&&(n.ac(0,"span"),n.Kc(1),n.nc(2,"translate"),n.Zb()),2&t&&(n.Jb(1),n.Lc(n.oc(2,1,"Cancel")))}function yt(t,e){if(1&t){const t=n.bc();n.ac(0,"span"),n.ac(1,"a",41),n.kc("click",function(){n.Dc(t);const e=n.mc(3);return e.cancelRequest(e.userID,e.GroupId)}),n.Ic(2,Ct,3,3,"span",0),n.Zb(),n.Zb()}if(2&t){const t=n.mc(3);n.Jb(2),n.tc("ngIf",t.subscribe.includes(t.userID))}}function Zt(t,e){1&t&&(n.ac(0,"span"),n.Kc(1),n.nc(2,"translate"),n.Zb()),2&t&&(n.Jb(1),n.Lc(n.oc(2,1,"Join Us")))}function It(t,e){if(1&t){const t=n.bc();n.ac(0,"a",41),n.kc("click",function(){n.Dc(t);const e=n.mc(3);return e.requestToJoin(e.userID,e.GroupId)}),n.Ic(1,Zt,3,3,"span",0),n.Zb()}if(2&t){const t=n.mc(3);n.Jb(1),n.tc("ngIf",!t.subscribe.includes(t.userID))}}const kt=function(t){return{"text-right":t}};function Mt(t,e){if(1&t&&(n.ac(0,"p",36),n.ac(1,"ngb-alert",37),n.ac(2,"strong"),n.Kc(3),n.nc(4,"translate"),n.Zb(),n.Wb(5,"br"),n.Kc(6),n.nc(7,"translate"),n.Ic(8,yt,3,1,"span",38),n.Ic(9,It,2,1,"ng-template",null,39,n.Jc),n.Wb(11,"img",40),n.Zb(),n.Zb()),2&t){const t=n.Cc(10),e=n.mc(2);n.tc("ngClass",n.yc(10,kt,"ar"==e.Lang)),n.Jb(1),n.tc("dismissible",!1),n.Jb(2),n.Lc(n.oc(4,6,"Warning!")),n.Jb(3),n.Mc(" ",n.oc(7,8,"You are not recognized yet.. Please Wait Admins To Approve Your Request Or Send Request To")," "),n.Jb(2),n.tc("ngIf",e.subscribe.includes(e.userID))("ngIfElse",t)}}function Dt(t,e){if(1&t&&(n.ac(0,"section"),n.ac(1,"section",1),n.ac(2,"div",2),n.Wb(3,"img",3),n.ac(4,"div",4),n.Wb(5,"img",5),n.Zb(),n.ac(6,"div",6),n.ac(7,"a",7),n.Wb(8,"i",8),n.Zb(),n.ac(9,"div",9),n.ac(10,"button",10),n.Wb(11,"i",11),n.Zb(),n.ac(12,"div",12),n.ac(13,"button",13),n.Kc(14,"Edit"),n.Zb(),n.ac(15,"button",13),n.Kc(16,"Duplicate"),n.Zb(),n.ac(17,"button",13),n.Kc(18,"Move"),n.Zb(),n.Wb(19,"div",14),n.ac(20,"button",13),n.Kc(21,"Delete"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.ac(22,"h4",15),n.Kc(23),n.Zb(),n.ac(24,"span",16),n.Wb(25,"i",17),n.Kc(26,"Listed Group"),n.Zb(),n.Zb(),n.Ic(27,vt,2,2,"div",0),n.Ic(28,Mt,12,12,"ng-template",null,18,n.Jc),n.Zb()),2&t){const t=n.mc();n.Jb(1),n.tc("ngClass",n.yc(4,kt,"ar"==t.Lang)),n.Jb(4),n.tc("src",t.Group.Img,n.Ec),n.Jb(18),n.Lc(t.Group.Name),n.Jb(4),n.tc("ngIf",null!=t.admin)}}let Jt=(()=>{class t{constructor(t,e,s){this.GrpServ=t,this.us=e,this.tranSev=s,this.users=[],this.admin=[],this.member=[],this.subscribe=[],this.subscription=[]}ngOnInit(){this.data=this.us.localUserData.asObservable(),this.Lang=localStorage.getItem("lang");let t=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.avatar=t.avatar)});this.subscription.push(t);let e=this.GrpServ.getGrpById(this.GroupId).subscribe(t=>{this.Group=t});this.subscription.push(e)}ngOnChanges(){for(let t of this.users)t.id==this.userID&&1==t.Role&&this.admin.push(t.id),t.id==this.userID&&2==t.Role&&this.member.push(t.id),t.id==this.userID&&0==t.Role&&this.subscribe.push(t.id)}requestToJoin(t,e){this.GrpServ.sendRequest(t,e)}cancelRequest(t,e){this.GrpServ.DeleteMembers(t,e)}ngOnDestroy(){for(let t of this.subscription)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(a),n.Vb(o.a),n.Vb(f.d))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-center-group-page"]],inputs:{GroupId:"GroupId",users:"users"},features:[n.Hb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"profile-group-content","rounded","border","border-1",3,"ngClass"],[1,"profile-group-header","rounded"],["src","../../../../assets/1200x400.jpg","alt","","srcset","",1,"img-fluid","rounded"],[1,"profile-group-img"],["width","150px","alt","",1,"img-thumbnail","rounded-circle","mx-3",3,"src"],[1,"d-flex","justify-content-end"],[1,"btn"],[1,"far","fa-bell"],["ngbDropdown","","container","body",1,"d-inline"],["type","button","ngbDropdownToggle","",1,"btn","btn-default"],[1,"fas","fa-ellipsis-h"],["ngbDropdownMenu",""],["ngbDropdownItem",""],[1,"dropdown-divider"],[1,"pt-5","mt-3","mt-md-5","mx-4"],[1,"text-muted"],[1,"fas","fa-users","mx-4","mr-2","mb-4"],["messegeBlock",""],["class","write-post-on-group mt-3",4,"ngIf","ngIfElse"],[1,"write-post-on-group","mt-3"],[1,"media","border","p-3","postcontainer",2,"background-color","white","border-radius",".5em"],[1,"media-body",2,"align-items","center"],[1,"mx-3","mt-2","rounded-circle","logged-img",2,"width","10%","height","auto",3,"src"],[3,"SelectedGroupId"],[1,"W-100%"],[1,"write-post-btns",2,"width","100%","text-align","center"],[1,"postIconsHover"],[1,"diviconsize",2,"width","20%","display","inline-block"],[1,"far","fa-image","writeposticons",2,"color","#70b5f9"],[1,"writeposticonsNames"],[1,"fab","fa-youtube","writeposticons",2,"color","#81c261"],[1,"far","fa-calendar-check","writeposticons",2,"color","#e7a33e"],[1,"far","fa-file-alt","writeposticons",2,"color","#f5987e"],[1,"group-users-posts"],[3,"GroupId"],[1,"py-3",3,"ngClass"],[3,"dismissible"],[4,"ngIf","ngIfElse"],["JoinUS",""],["src","../../../../assets/wait-approve.jpg","alt","","srcset","",1,"img-fluid","pt-2"],[1,"font-weight-bold","btn","p-0",3,"click"]],template:function(t,e){1&t&&n.Ic(0,Dt,30,6,"section",0),2&t&&n.tc("ngIf",null!=e.Group)},directives:[c.n,c.l,r.e,r.h,r.g,r.f,U,ht,r.b],pipes:[f.c],styles:[".btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.profile-group-content[_ngcontent-%COMP%]{background-color:#fff}.profile-group-content[_ngcontent-%COMP%]   .profile-group-header[_ngcontent-%COMP%]{position:relative}.profile-group-content[_ngcontent-%COMP%]   .profile-group-header[_ngcontent-%COMP%]   .profile-group-img[_ngcontent-%COMP%]{position:absolute;top:50%}@media screen and (max-width:450px){.profile-group-content[_ngcontent-%COMP%]   .profile-group-header[_ngcontent-%COMP%]   .profile-group-img[_ngcontent-%COMP%]{top:25%;right:42%;width:33%}.logged-img[_ngcontent-%COMP%]{display:none}.write-post-btns[_ngcontent-%COMP%]{font-size:14px}}"]}),t})();var Pt=s("WBZy");function Ot(t,e){if(1&t&&(n.ac(0,"span"),n.Wb(1,"img",16),n.Zb()),2&t){const t=n.mc().$implicit;n.Jb(1),n.uc("src",t.avatar,n.Ec)}}function xt(t,e){if(1&t&&(n.ac(0,"span"),n.Ic(1,Ot,2,1,"span",0),n.Zb()),2&t){const t=e.index;n.Jb(1),n.tc("ngIf",t<5)}}const wt=function(t){return{"text-right":t}};function Lt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",38),n.Wb(1,"button",39),n.ac(2,"div",40),n.ac(3,"div"),n.ac(4,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,2)}),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div"),n.ac(8,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,0)}),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.Zb(),n.ac(11,"div"),n.ac(12,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.deleteUser(e.id,s.GroupId)}),n.Kc(13),n.nc(14,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc(5);n.Jb(2),n.tc("ngClass",n.yc(10,wt,"ar"==t.Lang)),n.Jb(3),n.Mc(" ",n.oc(6,4,"Member")," "),n.Jb(4),n.Mc(" ",n.oc(10,6,"Subscriber")," "),n.Jb(4),n.Mc(" ",n.oc(14,8,"Delete")," ")}}const Gt=function(t){return{"d-flex align-items-center":t}},St=function(t,e){return{"pt-0 mr-auto":t,"d-none":e}};function _t(t,e){if(1&t){const t=n.bc();n.ac(0,"div",30),n.Wb(1,"img",31),n.ac(2,"a",32),n.kc("click",function(){return n.Dc(t),n.mc(2).$implicit.dismiss("Cross click")}),n.Kc(3),n.ac(4,"span",33),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div",34),n.ac(8,"div",35),n.ac(9,"button",36),n.kc("click",function(){n.Dc(t);const e=n.mc().$implicit,s=n.mc().$implicit,c=n.mc(2);return c.openChat(c.loggedUser,e),s.dismiss("Cross click")}),n.Kc(10),n.nc(11,"translate"),n.Zb(),n.Ic(12,Lt,15,12,"div",37),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc().$implicit,e=n.mc(3);n.tc("ngClass",n.yc(13,Gt,"ar"==e.Lang)),n.Jb(1),n.tc("src",t.avatar,n.Ec),n.Jb(1),n.vc("routerLink","/profile/",t.id,""),n.Jb(1),n.Nc(" ",t.firstName," ",t.lastName," "),n.Jb(2),n.Lc(n.oc(6,9,"Admin")),n.Jb(2),n.tc("ngClass",n.zc(15,St,"ar"==e.Lang,t.id==e.userID)),n.Jb(3),n.Lc(n.oc(11,11,"Messege")),n.Jb(2),n.tc("ngIf",e.adminID.includes(e.userID))}}function Kt(t,e){if(1&t&&(n.ac(0,"div"),n.Ic(1,_t,13,18,"div",29),n.Zb()),2&t){const t=e.$implicit;n.Jb(1),n.tc("ngIf",1==t.Role)}}function Nt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",38),n.Wb(1,"button",39),n.ac(2,"div",40),n.ac(3,"div"),n.ac(4,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,1)}),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div"),n.ac(8,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,0)}),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.Zb(),n.ac(11,"div"),n.ac(12,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.deleteUser(e.id,s.GroupId)}),n.Kc(13),n.nc(14,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc(5);n.Jb(2),n.tc("ngClass",n.yc(10,wt,"ar"==t.Lang)),n.Jb(3),n.Mc(" ",n.oc(6,4,"Admin")," "),n.Jb(4),n.Mc(" ",n.oc(10,6,"Subscriber")," "),n.Jb(4),n.Mc(" ",n.oc(14,8,"Delete")," ")}}function Wt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",30),n.Wb(1,"img",31),n.ac(2,"a",32),n.kc("click",function(){return n.Dc(t),n.mc(2).$implicit.dismiss("Cross click")}),n.Kc(3),n.ac(4,"span",33),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div",34),n.ac(8,"div",35),n.ac(9,"button",36),n.kc("click",function(){n.Dc(t);const e=n.mc().$implicit,s=n.mc().$implicit,c=n.mc(2);return c.openChat(c.loggedUser,e),s.dismiss("Cross click")}),n.Kc(10),n.nc(11,"translate"),n.Zb(),n.Ic(12,Nt,15,12,"div",37),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc().$implicit,e=n.mc(3);n.tc("ngClass",n.yc(13,Gt,"ar"==e.Lang)),n.Jb(1),n.tc("src",t.avatar,n.Ec),n.Jb(1),n.vc("routerLink","/profile/",t.id,""),n.Jb(1),n.Nc(" ",t.firstName," ",t.lastName," "),n.Jb(2),n.Lc(n.oc(6,9,"Member")),n.Jb(2),n.tc("ngClass",n.zc(15,St,"ar"==e.Lang,t.id==e.userID)),n.Jb(3),n.Lc(n.oc(11,11,"Messege")),n.Jb(2),n.tc("ngIf",e.adminID.includes(e.userID))}}function Ft(t,e){if(1&t&&(n.ac(0,"div"),n.Ic(1,Wt,13,18,"div",29),n.Zb()),2&t){const t=e.$implicit;n.Jb(1),n.tc("ngIf",2==t.Role)}}function Bt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",38),n.Wb(1,"button",39),n.ac(2,"div",40),n.ac(3,"div"),n.ac(4,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,1)}),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div"),n.ac(8,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.Roles(e.id,s.GroupId,2)}),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.Zb(),n.ac(11,"div"),n.ac(12,"button",41),n.kc("click",function(){n.Dc(t);const e=n.mc(2).$implicit,s=n.mc(3);return s.deleteUser(e.id,s.GroupId)}),n.Kc(13),n.nc(14,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc(5);n.Jb(2),n.tc("ngClass",n.yc(10,wt,"ar"==t.Lang)),n.Jb(3),n.Mc(" ",n.oc(6,4,"Admin")," "),n.Jb(4),n.Mc(" ",n.oc(10,6,"Member")," "),n.Jb(4),n.Mc(" ",n.oc(14,8,"Delete")," ")}}function Rt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",30),n.Wb(1,"img",31),n.ac(2,"a",32),n.kc("click",function(){return n.Dc(t),n.mc(2).$implicit.dismiss("Cross click")}),n.Kc(3),n.ac(4,"span",33),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.Zb(),n.ac(7,"div",34),n.ac(8,"div",35),n.ac(9,"button",36),n.kc("click",function(){n.Dc(t);const e=n.mc().$implicit,s=n.mc().$implicit,c=n.mc(2);return c.openChat(c.loggedUser,e),s.dismiss("Cross click")}),n.Kc(10),n.nc(11,"translate"),n.Zb(),n.Ic(12,Bt,15,12,"div",37),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc().$implicit,e=n.mc(3);n.tc("ngClass",n.yc(13,Gt,"ar"==e.Lang)),n.Jb(1),n.tc("src",t.avatar,n.Ec),n.Jb(1),n.vc("routerLink","/profile/",t.id,""),n.Jb(1),n.Nc(" ",t.firstName," ",t.lastName," "),n.Jb(2),n.Lc(n.oc(6,9,"Subscriber")),n.Jb(2),n.tc("ngClass",n.zc(15,St,"ar"==e.Lang,t.id==e.userID)),n.Jb(3),n.Lc(n.oc(11,11,"Messege")),n.Jb(2),n.tc("ngIf",e.adminID.includes(e.userID))}}function Ut(t,e){if(1&t&&(n.ac(0,"div",42),n.Ic(1,Rt,13,18,"div",29),n.Zb()),2&t){const t=e.$implicit;n.Jb(1),n.tc("ngIf",0==t.Role)}}const $t=function(t){return{"m-0 p-0":t}};function Tt(t,e){if(1&t){const t=n.bc();n.ac(0,"div",17),n.ac(1,"h6",18),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"button",19),n.kc("click",function(){return e.$implicit.dismiss("Cross click")}),n.ac(5,"span",20),n.Kc(6,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(7,"div",21),n.ac(8,"div",22),n.Wb(9,"span",23),n.ac(10,"input",24),n.kc("ngModelChange",function(e){return n.Dc(t),n.mc(2).keyWordsSearch=e}),n.nc(11,"translate"),n.Zb(),n.Zb(),n.ac(12,"div",25),n.ac(13,"h5",26),n.Kc(14),n.nc(15,"translate"),n.Zb(),n.ac(16,"div",27),n.Ic(17,Kt,2,1,"div",5),n.nc(18,"filter"),n.Zb(),n.ac(19,"h5",26),n.Kc(20),n.nc(21,"translate"),n.Zb(),n.ac(22,"div",27),n.Ic(23,Ft,2,1,"div",5),n.nc(24,"filter"),n.Zb(),n.ac(25,"h5",26),n.Kc(26),n.nc(27,"translate"),n.Zb(),n.ac(28,"div",27),n.Ic(29,Ut,2,1,"div",28),n.nc(30,"filter"),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc(2);n.Jb(2),n.Lc(n.oc(3,11,"Group Members")),n.Jb(2),n.tc("ngClass",n.yc(30,$t,"ar"==t.Lang)),n.Jb(6),n.uc("placeholder",n.oc(11,13,"What Do You Have Searching For ?...")),n.tc("ngModel",t.keyWordsSearch),n.Jb(2),n.tc("ngClass",n.yc(32,wt,"ar"==t.Lang)),n.Jb(2),n.Lc(n.oc(15,15,"Admins")),n.Jb(3),n.tc("ngForOf",n.pc(18,17,t.users,t.keyWordsSearch)),n.Jb(3),n.Lc(n.oc(21,20,"Members")),n.Jb(3),n.tc("ngForOf",n.pc(24,22,t.users,t.keyWordsSearch)),n.Jb(3),n.Lc(n.oc(27,25,"Subscribers")),n.Jb(3),n.tc("ngForOf",n.pc(30,27,t.users,t.keyWordsSearch))}}function jt(t,e){if(1&t&&(n.ac(0,"div",17),n.ac(1,"h6",18),n.Kc(2),n.nc(3,"translate"),n.Zb(),n.ac(4,"button",19),n.kc("click",function(){return e.$implicit.dismiss("Cross click")}),n.ac(5,"span",20),n.Kc(6,"\xd7"),n.Zb(),n.Zb(),n.Zb(),n.ac(7,"div",43),n.ac(8,"h4"),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.ac(11,"h4"),n.Kc(12),n.nc(13,"translate"),n.Zb(),n.Wb(14,"hr"),n.ac(15,"h6",44),n.Kc(16),n.nc(17,"translate"),n.Zb(),n.ac(18,"p"),n.Kc(19),n.Zb(),n.Zb()),2&t){const t=n.mc(2);n.Jb(2),n.Lc(n.oc(3,9,"Description Group")),n.Jb(2),n.tc("ngClass",n.yc(17,$t,"ar"==t.Lang)),n.Jb(3),n.tc("ngClass",n.yc(19,wt,"ar"==t.Lang)),n.Jb(2),n.Nc("",n.oc(10,11,"Group Name:")," ",t.Group.Name,""),n.Jb(3),n.Nc("",n.oc(13,13,"Group specialty:")," ",t.Group.Specialty,""),n.Jb(4),n.Lc(n.oc(17,15,"Group Description")),n.Jb(3),n.Lc(t.Group.Description)}}function Vt(t,e){if(1&t&&(n.ac(0,"div",45),n.ac(1,"div",46),n.Wb(2,"img",47),n.ac(3,"h6",48),n.ac(4,"a",49),n.Kc(5),n.Zb(),n.ac(6,"span",50),n.Kc(7),n.nc(8,"translate"),n.Zb(),n.Zb(),n.ac(9,"small",44),n.Kc(10),n.Zb(),n.Zb(),n.Zb()),2&t){const t=e.$implicit;n.Jb(2),n.tc("src",t.avatar,n.Ec),n.Jb(3),n.Nc(" ",t.firstName," ",t.lastName," "),n.Jb(2),n.Lc(n.oc(8,5,"Manager")),n.Jb(3),n.Lc(t.jobTitle)}}function Et(t,e){if(1&t){const t=n.bc();n.ac(0,"div"),n.ac(1,"div",1),n.ac(2,"div",2),n.ac(3,"h6",3),n.ac(4,"span"),n.Kc(5),n.Zb(),n.Kc(6),n.nc(7,"translate"),n.Zb(),n.ac(8,"p",4),n.Kc(9),n.nc(10,"translate"),n.Zb(),n.Ic(11,xt,2,1,"span",5),n.ac(12,"span",6),n.Kc(13,"..."),n.Zb(),n.Zb(),n.ac(14,"div",7),n.ac(15,"button",8),n.ac(16,"a",9),n.kc("click",function(){n.Dc(t);const e=n.Cc(20);return n.mc().openLg(e)}),n.Kc(17),n.nc(18,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Ic(19,Tt,31,34,"ng-template",null,10,n.Jc),n.Zb(),n.ac(21,"div",11),n.ac(22,"div",2),n.ac(23,"h6",3),n.Kc(24),n.nc(25,"translate"),n.Zb(),n.ac(26,"p",4),n.Kc(27),n.Zb(),n.Zb(),n.ac(28,"div",7),n.ac(29,"button",8),n.ac(30,"a",9),n.kc("click",function(){n.Dc(t);const e=n.Cc(34);return n.mc().openLg(e)}),n.Kc(31),n.nc(32,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Ic(33,jt,20,21,"ng-template",null,12,n.Jc),n.ac(35,"div",13),n.ac(36,"div",14),n.ac(37,"h6",3),n.Kc(38),n.nc(39,"translate"),n.Zb(),n.Ic(40,Vt,11,7,"div",15),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=n.mc();n.Jb(2),n.tc("ngClass",n.yc(26,wt,"ar"==t.Lang)),n.Jb(3),n.Lc(t.users.length),n.Jb(1),n.Mc(" ",n.oc(7,14,"members"),""),n.Jb(3),n.Mc("",n.oc(10,16,"including")," "),n.Jb(2),n.tc("ngForOf",t.users),n.Jb(6),n.Lc(n.oc(18,18,"See All")),n.Jb(5),n.tc("ngClass",n.yc(28,wt,"ar"==t.Lang)),n.Jb(2),n.Lc(n.oc(25,20,"Description")),n.Jb(3),n.Mc("",t.Group.Description.slice(0,200),"..."),n.Jb(4),n.Lc(n.oc(32,22,"See All")),n.Jb(4),n.tc("ngClass",n.yc(30,wt,"ar"==t.Lang)),n.Jb(3),n.Nc("",n.oc(39,24,"Admins")," : ",t.adminRole.length,""),n.Jb(2),n.tc("ngForOf",t.adminRole)}}let At=(()=>{class t{constructor(t,e,s,c,n){this.GrpServ=t,this.modalService=e,this.us=s,this.chat=c,this.toastService=n,this.users=[],this.adminRole=[],this.adminID=[],this.subscription=[]}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.data=this.us.localUserData.asObservable();let t=this.data.subscribe(t=>{null!=t&&(this.userID=t.id,this.loggedUser=t)});this.subscription.push(t);let e=this.GrpServ.getGrpById(this.GroupId).subscribe(t=>{this.Group=t});this.subscription.push(e)}ngOnChanges(){this.adminRole=[];for(let t of this.users)1==t.Role&&(this.adminRole.push(t),this.adminID.push(t.id))}ngOnDestroy(){for(let t of this.subscription)t.unsubscribe()}openChat(t,e){this.chat.newChat(t,e)}openLg(t){this.modalService.open(t,{size:"lg"})}showMsg(){"en"==this.Lang?this.toastService.show("Member Updated",{classname:"bg-info text-light top-center",delay:5e3}):this.toastService.show("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0639\u0636\u0648",{classname:"bg-info text-right text-light top-center",delay:5e3})}showMsgDanger(){"en"==this.Lang?this.toastService.show("Member Deleted",{classname:"bg-danger text-light top-center",delay:5e3}):this.toastService.show("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0636\u0648",{classname:"bg-danger text-right text-light top-center",delay:5e3})}Roles(t,e,s){this.showMsg(),this.GrpServ.MembersRole(t,e,s)}deleteUser(t,e){this.showMsgDanger(),this.GrpServ.DeleteMembers(t,e)}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(a),n.Vb(r.i),n.Vb(o.a),n.Vb(Pt.a),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-right-side-group"]],inputs:{GroupId:"GroupId",users:"users"},features:[n.Hb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"card"],[1,"card-body",3,"ngClass"],[1,"card-title"],[1,"card-text"],[4,"ngFor","ngForOf"],[1,"avatar-container-more"],[1,"card-footer","text-muted","text-center"],[1,"btn","py-0"],[1,"card-link",3,"click"],["content",""],[1,"card","text-left","mt-3"],["about",""],[1,"card","mt-3",3,"ngClass"],[1,"card-body"],["class","media mt-3",4,"ngFor","ngForOf"],[1,"avatar-container-item","avatars-right",3,"src"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"ngClass","click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"row",3,"ngClass"],[1,"text-muted","p-2"],[1,"col-md-12"],["class","mb-3",4,"ngFor","ngForOf"],["class","mb-3 px-3",3,"ngClass",4,"ngIf"],[1,"mb-3","px-3",3,"ngClass"],["width","60",3,"src"],["href","#",1,"font-weight-bold","btn",3,"routerLink","click"],[1,"badge","badge-secondary","ml-2"],[1,"float-right",3,"ngClass"],[1,"btn-group","mr-3"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","btn-group","ngbDropdown","","role","group","aria-label","Button group with nested dropdown",4,"ngIf"],["ngbDropdown","","role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm","dropdown-toggle-split"],["ngbDropdownMenu","",1,"dropdown-menu",3,"ngClass"],["ngbDropdownItem","",3,"click"],[1,"mb-3"],[1,"p-3",3,"ngClass"],[1,"text-muted"],[1,"media","mt-3"],[1,"media-body","text-center"],["alt","","width","64px",1,"mr-2","rounded-circle",3,"src"],[1,"mt-1","mb-1"],["href","#",1,"text-dark","text-decoration-none"],[1,"badge","badge-secondary"]],template:function(t,e){1&t&&n.Ic(0,Et,41,32,"div",0),2&t&&n.tc("ngIf",null!=e.Group)},directives:[c.n,c.l,c.m,h.a,h.k,h.n,m.i,r.e,r.h,r.g,r.f],pipes:[f.c,v.a],styles:['.avatar-container-item[_ngcontent-%COMP%]{background:#999;width:50px;height:50px;border-radius:50%;border:3px solid #fff;margin-left:-10px;transition:all .7s ease-in-out;transform:scale(1)}.avatar-container-item[_ngcontent-%COMP%]:hover{background:#bdbdbd;cursor:pointer;transform:scale(1.5);z-index:2}.avatar-container-more[_ngcontent-%COMP%]{font-size:20px;padding:0 10px;color:#3d3d3d;content:"..."}.avatar-container-more[_ngcontent-%COMP%]:hover{color:#707070;cursor:pointer}.btn[_ngcontent-%COMP%]{outline:none;box-shadow:none}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem;padding-right:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}']}),t})(),qt=(()=>{class t{constructor(t,e){this.activeRoute=t,this.GrpServ=e,this.admins=[],this.members=[],this.subscribers=[],this.adminRole=[],this.users=[],this.subscription=[]}ngOnInit(){this.activeRoute.paramMap.subscribe(t=>{this.GroupId=t.get("id"),this.GrpServ.getGroupsUsers(this.GroupId).subscribe(t=>{this.users=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})})}ngOnDestroy(){for(let t of this.subscription)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(m.a),n.Vb(a))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-group-profile-page"]],decls:8,vars:4,consts:[[1,"container","group-profile","mt-5"],[1,"row"],[1,"col-lg-3","d-none","d-lg-block"],[1,"col-lg-6","mb-2"],[3,"GroupId","users"],[1,"col-lg-3"]],template:function(t,e){1&t&&(n.ac(0,"section",0),n.ac(1,"div",1),n.ac(2,"aside",2),n.Wb(3,"app-left-side-group"),n.Zb(),n.ac(4,"div",3),n.Wb(5,"app-center-group-page",4),n.Zb(),n.ac(6,"div",5),n.Wb(7,"app-right-side-group",4),n.Zb(),n.Zb(),n.Zb()),2&t&&(n.Jb(5),n.tc("GroupId",e.GroupId)("users",e.users),n.Jb(2),n.tc("GroupId",e.GroupId)("users",e.users))},directives:[_,Jt,At],styles:[""]}),t})();function zt(t,e){1&t&&n.Wb(0,"img",22)}function Yt(t,e){if(1&t&&n.Wb(0,"img",23),2&t){const t=n.mc().$implicit;n.tc("src",t.Img,n.Ec)}}const Ht=function(t){return{"text-right":t}};function Xt(t,e){if(1&t){const t=n.bc();n.ac(0,"ul",10),n.ac(1,"li",11),n.ac(2,"div",12),n.Ic(3,zt,1,0,"img",13),n.Ic(4,Yt,1,1,"img",14),n.ac(5,"div",15),n.ac(6,"h6",16),n.ac(7,"a",17),n.Kc(8),n.Zb(),n.Zb(),n.ac(9,"small",18),n.Kc(10),n.Zb(),n.Wb(11,"br"),n.Zb(),n.ac(12,"button",19),n.kc("click",function(){n.Dc(t);const s=e.$implicit,c=n.mc();return c.sendRequest(c.userID,s.id)}),n.Wb(13,"i",20),n.ac(14,"span",21),n.Kc(15),n.nc(16,"translate"),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.Zb()}if(2&t){const t=e.$implicit,s=n.mc();n.Jb(1),n.tc("ngClass",n.yc(9,Ht,"ar"==s.Lang)),n.Jb(2),n.tc("ngIf",""==t.Img),n.Jb(1),n.tc("ngIf",""!=t.Img),n.Jb(3),n.vc("routerLink","/Group/group-profile/",t.id,""),n.Jb(1),n.Lc(t.Name),n.Jb(2),n.Lc(t.Specialty),n.Jb(5),n.Mc(" ",n.oc(16,7,"Request To Join"),"")}}let Qt=(()=>{class t{constructor(t,e,s){this.groupService=t,this.us=e,this.toastService=s,this.GroupList=[],this.allUsers=[],this.subscription=[],this.show=!0,this.data=this.us.localUserData.asObservable();let c=this.data.subscribe(t=>{null!=t&&(this.userID=t.id)});this.subscription.push(c)}ngOnInit(){this.Lang=localStorage.getItem("lang"),this.GroupList=[];let t=this.groupService.getGroups().subscribe(t=>{this.GroupList2=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.GroupList=[];for(let e of this.GroupList2){let t=this.groupService.getGroupsUsers(e.id).subscribe(t=>{this.allUsers=[];let s=!1;this.allUsers=t.map(t=>t.payload.doc.id),this.allUsers.includes(this.userID)?this.GroupList=this.GroupList.filter(t=>t.id!=e.id):(this.GroupList.find(t=>{t.id==e.id&&(s=!0)}),s||this.GroupList.push(e))});this.subscription.push(t)}});this.subscription.push(t)}sendRequest(t,e){this.showSuccess(),this.groupService.sendRequest(t,e)}showSuccess(){"en"==this.Lang?this.toastService.show("Your Request Has Been Sent",{classname:"bg-success text-light",delay:5e3}):this.toastService.show("\u0644\u0642\u062f \u062a\u0645 \u0627\u0631\u0633\u0627\u0644 \u0637\u0644\u0628\u0643",{classname:"bg-success text-light text-right",delay:5e3})}identify(t,e){return e.id}ngOnDestroy(){for(let t of this.subscription)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(a),n.Vb(o.a),n.Vb(l))},t.\u0275cmp=n.Pb({type:t,selectors:[["app-discover"]],decls:14,vars:15,consts:[[1,"groups-page"],["aria-live","polite","aria-atomic","true"],[1,"container"],[1,"content-groups"],[1,"text-muted","py-2",3,"ngClass"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["id","GroupsDiscover",1,"Groups-content-display1"],["class","list-group list-group-flush",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"ngClass"],[1,"media"],["class","mx-3","src","../../../../assets/400x400.png","alt","","width","64px",4,"ngIf"],["class","mx-3","alt","","width","64px",3,"src",4,"ngIf"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"text-decoration-none",3,"routerLink"],[1,"text-muted"],[1,"btn","btn-outline-success","btn-sm","rounded-pill","px-3","mt-3",3,"click"],[1,"fas","fa-user-plus"],[1,"custom-describe"],["src","../../../../assets/400x400.png","alt","","width","64px",1,"mx-3"],["alt","","width","64px",1,"mx-3",3,"src"]],template:function(t,e){1&t&&(n.ac(0,"section",0),n.Wb(1,"app-toasterMsg",1),n.ac(2,"div",2),n.ac(3,"div",3),n.ac(4,"h1",4),n.Kc(5),n.nc(6,"translate"),n.Zb(),n.ac(7,"div",5),n.Wb(8,"span",6),n.ac(9,"input",7),n.kc("ngModelChange",function(t){return e.keyWordsSearch=t}),n.nc(10,"translate"),n.Zb(),n.Zb(),n.ac(11,"div",8),n.Ic(12,Xt,17,11,"ul",9),n.nc(13,"filter"),n.Zb(),n.Zb(),n.Zb(),n.Zb()),2&t&&(n.Jb(4),n.tc("ngClass",n.yc(13,Ht,"ar"==e.Lang)),n.Jb(1),n.Lc(n.oc(6,6,"Discover Groups")),n.Jb(4),n.uc("placeholder",n.oc(10,8,"What Do You Have Searching For ?...")),n.tc("ngModel",e.keyWordsSearch),n.Jb(3),n.tc("ngForOf",n.pc(13,10,e.GroupList,e.keyWordsSearch))("ngForTrackBy",e.identify))},directives:[g,c.l,h.a,h.k,h.n,c.m,c.n,m.i],pipes:[f.c,v.a],styles:["section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]{border:1px solid;background-color:#fff;border-radius:10px;padding:20px;margin-top:50px;margin-bottom:50px}@media screen and (max-width:600px){.custom-describe[_ngcontent-%COMP%]{display:none}}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){border:none;transition:.3s}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child):hover{background-color:#eee}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .head-groups-page[_ngcontent-%COMP%]   .group-tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid #7dc0ff;font-weight:700}section.groups-page[_ngcontent-%COMP%]   .content-groups[_ngcontent-%COMP%]   .Groups-content-display2[_ngcontent-%COMP%]{padding:6px 12px}.content-groups[_ngcontent-%COMP%]   .Groups-content-display1[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.75rem .25rem}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem;padding-right:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.ngb-toasts[_ngcontent-%COMP%]{right:40%!important;top:8%!important}"]}),t})();var te=s("tk/3"),ee=s("mqiu");const se=[{path:"all-groups",component:w},{path:"discover-groups",component:Qt},{path:"group-profile/:id",component:qt},{path:"",redirectTo:"/Group/all-groups",pathMatch:"full"},{path:"**",redirectTo:"/Home",pathMatch:"full"}];function ce(t){return new ee.a(t,"./assets/i18n",".json")}let ne=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Tb({type:t}),t.\u0275inj=n.Sb({imports:[[c.c,m.j.forChild(se),r.k,h.p,v.b,h.f,te.b,f.b.forChild({loader:{provide:f.a,useFactory:ce,deps:[te.a]}}),$.b],f.b]}),t})()},WBZy:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var c=s("fXoL"),n=s("I/3d"),i=s("tyNb");let o=(()=>{class t{constructor(t,e){this.db=t,this.router=e}getChats(){return this.db.collection("Masseges").snapshotChanges()}getMasseges(t){return this.db.collection("Masseges").doc(t).collection("masseges",t=>t.limit(20).orderBy("sentAt","asc")).snapshotChanges()}getRoom(t){return this.db.collection("Masseges").doc(t).snapshotChanges()}fullDeleteRoom(t){return this.db.collection("Masseges").doc(t).delete()}filtration(t,e,s){return t.filter(t=>{let c=t.User1,n=t.User2;if(c.id==e&&n.id==s||c.id==s&&n.id==e)return t})}newChat(t,e){let s=[],c=this.getChats().subscribe(n=>{if(s=n.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),s=this.filtration(s,t.id,e.id),c.unsubscribe(),!(s.length>0))return this.db.collection("Masseges").add({User1:{firstName:t.firstName,lastName:t.lastName,avatar:t.avatar,isDeleted:!1,id:t.id},User2:{firstName:e.firstName,lastName:e.lastName,avatar:e.avatar,isDeleted:!1,id:e.id}}).then(t=>{this.router.navigate([`/Messages/all-messages/${t.id}`])});{let e=s[0].id;if(t.id==s[0].User1.id)return this.db.collection("Masseges").doc(e).update({User1:{firstName:t.firstName,lastName:t.lastName,avatar:t.avatar,isDeleted:!1,id:t.id}}).then(t=>{this.router.navigate([`/Messages/all-messages/${e}`])});if(t.id==s[0].User2.id)return this.db.collection("Masseges").doc(e).update({User2:{firstName:t.firstName,lastName:t.lastName,avatar:t.avatar,isDeleted:!1,id:t.id}}).then(t=>{this.router.navigate([`/Messages/all-messages/${e}`])})}})}sendMsg(t,e,s){return this.db.collection("Masseges").doc(t).collection("masseges").add({sendBy:e,Body:s,sentAt:new Date})}deleteRoom(t,e){let s,c,n,i,o=this.getRoom(t).subscribe(a=>{if(s=a.payload.data().User1,c=a.payload.data().User2,n=a.payload.data().User1.isDeleted,i=a.payload.data().User2.isDeleted,o.unsubscribe(),s.id==e&&i||c.id==e&&n)this.fullDeleteRoom(t);else{if(s.id==e&&!i)return s.isDeleted=!0,this.db.collection("Masseges").doc(t).update({User1:s});if(c.id==e&&!n)return c.isDeleted=!0,this.db.collection("Masseges").doc(t).update({User2:c})}})}}return t.\u0275fac=function(e){return new(e||t)(c.hc(n.a),c.hc(i.f))},t.\u0275prov=c.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);